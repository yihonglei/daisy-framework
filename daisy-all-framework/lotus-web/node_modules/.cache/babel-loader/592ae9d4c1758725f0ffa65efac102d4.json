{"remainingRequest":"/Users/hq_ly/mhjy/mhjy_manager/node_modules/babel-loader/lib/index.js!/Users/hq_ly/mhjy/mhjy_manager/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hq_ly/mhjy/mhjy_manager/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hq_ly/mhjy/mhjy_manager/src/views/permission/directive.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hq_ly/mhjy/mhjy_manager/src/views/permission/directive.vue","mtime":1659938322663},{"path":"/Users/hq_ly/mhjy/mhjy_manager/babel.config.js","mtime":1657164828372},{"path":"/Users/hq_ly/mhjy/mhjy_manager/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hq_ly/mhjy/mhjy_manager/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hq_ly/mhjy/mhjy_manager/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hq_ly/mhjy/mhjy_manager/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy9ocV9seS9taGp5L21oanlfbWFuYWdlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlci5qcyI7CmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gIi9Vc2Vycy9ocV9seS9taGp5L21oanlfbWFuYWdlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vcmVnZW5lcmF0b3JSdW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9ocV9seS9taGp5L21oanlfbWFuYWdlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgcGF0aCBmcm9tICdwYXRoJzsKaW1wb3J0IHsgZGVlcENsb25lIH0gZnJvbSAnQC91dGlscyc7CmltcG9ydCB7IGdldFJvbGVzIGFzIF9nZXRSb2xlcyB9IGZyb20gJ0AvYXBpL3JvbGUnOwppbXBvcnQgeyBnZXRTeXNVc2Vyc0xpc3QgYXMgX2dldFN5c1VzZXJzTGlzdCwgYWRkU3lzVXNlciwgdXBkYXRlU3lzVXNlciwgZGVsU3lzVXNlciB9IGZyb20gJ0AvYXBpL3VzZXInOwppbXBvcnQgeyBnZXRUb2tlbiwgc2V0VG9rZW4sIHJlbW92ZVRva2VuIH0gZnJvbSAnQC91dGlscy9hdXRoJzsKaW1wb3J0IGNoZWNrUGVybWlzc2lvbiBmcm9tICdAL3V0aWxzL3Blcm1pc3Npb24nOyAvLyDmnYPpmZDliKTmlq3lh73mlbAKCnZhciBkZWZhdWx0VXNlciA9IHsKICBpZDogMCwKICB1c2VybmFtZTogJycsCiAgYXZhdGFyOiAnJywKICBuYW1lOiAnJywKICBwaG9uZTogJycsCiAgYWxpcGF5OiAnJywKICByb2xlc0RhdGE6IFtdCn07CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcjogT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdFVzZXIpLAogICAgICByb2xlczogW10sCiAgICAgIHVzZXJzTGlzdDogW10sCiAgICAgIGRhdGFPYmo6IHsKICAgICAgICB0b2tlbjogJycsCiAgICAgICAga2V5OiAnJwogICAgICB9LAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZGlhbG9nVHlwZTogJ25ldycsCiAgICAgIGNoZWNrU3RyaWN0bHk6IGZhbHNlLAogICAgICBkZWZhdWx0UHJvcHM6IHsKICAgICAgICBsYWJlbDogJ3RpdGxlJywKICAgICAgICB0aXRsZTogJ3RpdGxlJywKICAgICAgICBpZDogMAogICAgICB9CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHJvbGVzRGF0YTogZnVuY3Rpb24gcm9sZXNEYXRhKCkgewogICAgICByZXR1cm4gdGhpcy5yb2xlczsKICAgIH0KICB9LAogIGZpbHRlcnM6IHsKICAgIGZpbHRlclN0YXR1czogZnVuY3Rpb24gZmlsdGVyU3RhdHVzKHN0YXR1cykgewogICAgICBpZiAoc3RhdHVzID09IDEpIHsKICAgICAgICByZXR1cm4gIuato+W4uCI7CiAgICAgIH0gZWxzZSBpZiAoc3RhdHVzID09IDIpIHsKICAgICAgICByZXR1cm4gIuemgeeUqCI7CiAgICAgIH0KICAgIH0sCiAgICBmaWx0ZXJSb2xlczogZnVuY3Rpb24gZmlsdGVyUm9sZXMocm9sZXMpIHsKICAgICAgdmFyIHRtcFJvbGVzID0gW107CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJvbGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIHJvbGUgPSByb2xlc1tpXTsKICAgICAgICB0bXBSb2xlcy5wdXNoKHJvbGUubmFtZSk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0bXBSb2xlcy5qb2luKCcsJyk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgLy8gTW9jazogZ2V0IGFsbCByb3V0ZXMgYW5kIHJvbGVzIGxpc3QgZnJvbSBzZXJ2ZXIKICAgIHRoaXMuZ2V0Um9sZXMoKTsKICAgIHRoaXMuZ2V0U3lzVXNlcnNMaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBjaGVja1Blcm1pc3Npb246IGNoZWNrUGVybWlzc2lvbiwKICAgIGdldFJvbGVzOiBmdW5jdGlvbiBnZXRSb2xlcygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlcywgcm9sZXM7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gX2dldFJvbGVzKCk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICByb2xlcyA9IHJlcy5kYXRhOwogICAgICAgICAgICAgICAgX3RoaXMucm9sZXMgPSBfdGhpcy5nZW5lcmF0ZVJvbGVzKHJvbGVzKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldFN5c1VzZXJzTGlzdDogZnVuY3Rpb24gZ2V0U3lzVXNlcnNMaXN0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciByZXM7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBfZ2V0U3lzVXNlcnNMaXN0KHsKICAgICAgICAgICAgICAgICAgdG9rZW46IGdldFRva2VuKCkKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIF90aGlzMi51c2Vyc0xpc3QgPSByZXMuZGF0YTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8gUmVzaGFwZSB0aGUgcm91dGVzIHN0cnVjdHVyZSBzbyB0aGF0IGl0IGxvb2tzIHRoZSBzYW1lIGFzIHRoZSBzaWRlYmFyCiAgICBnZW5lcmF0ZVJvbGVzOiBmdW5jdGlvbiBnZW5lcmF0ZVJvbGVzKHJvbGVzKSB7CiAgICAgIHZhciByZXMgPSBbXTsKCiAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihyb2xlcyksCiAgICAgICAgICBfc3RlcDsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciByb2xlID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgICAgdGl0bGU6IHJvbGUubmFtZSwKICAgICAgICAgICAgbGFiZWw6IHJvbGUubmFtZSwKICAgICAgICAgICAgaWQ6IHJvbGUuaWQKICAgICAgICAgIH07CiAgICAgICAgICByZXMucHVzaChkYXRhKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlczsKICAgIH0sCiAgICBnZW5lcmF0ZUFycjogZnVuY3Rpb24gZ2VuZXJhdGVBcnIocm9sZXMpIHsKICAgICAgdmFyIGRhdGEgPSBbXTsKICAgICAgcm9sZXMuZm9yRWFjaChmdW5jdGlvbiAocm9sZSkgewogICAgICAgIGRhdGEucHVzaChyb2xlKTsKICAgICAgfSk7CiAgICAgIHJldHVybiBkYXRhOwogICAgfSwKICAgIGhhbmRsZUFkZFVzZXI6IGZ1bmN0aW9uIGhhbmRsZUFkZFVzZXIoKSB7CiAgICAgIHRoaXMudXNlciA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRVc2VyKTsKCiAgICAgIGlmICh0aGlzLiRyZWZzLnRyZWUpIHsKICAgICAgICB0aGlzLiRyZWZzLnRyZWUuc2V0Q2hlY2tlZE5vZGVzKFtdKTsKICAgICAgfQoKICAgICAgdGhpcy5kaWFsb2dUeXBlID0gJ25ldyc7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgaGFuZGxlRWRpdDogZnVuY3Rpb24gaGFuZGxlRWRpdChzY29wZSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMuZGlhbG9nVHlwZSA9ICdlZGl0JzsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5jaGVja1N0cmljdGx5ID0gdHJ1ZTsKICAgICAgdGhpcy51c2VyID0gZGVlcENsb25lKHNjb3BlLnJvdyk7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgcm9sZXMgPSBfdGhpczMuZ2VuZXJhdGVSb2xlcyhfdGhpczMucm9sZXNEYXRhKTsKCiAgICAgICAgX3RoaXMzLiRyZWZzLnRyZWUuc2V0Q2hlY2tlZE5vZGVzKF90aGlzMy5nZW5lcmF0ZUFycihfdGhpczMudXNlci5yb2xlcykpOyAvLyBzZXQgY2hlY2tlZCBzdGF0ZSBvZiBhIG5vZGUgbm90IGFmZmVjdHMgaXRzIGZhdGhlciBhbmQgY2hpbGQgbm9kZXMKCgogICAgICAgIF90aGlzMy5jaGVja1N0cmljdGx5ID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZURlbGV0ZTogZnVuY3Rpb24gaGFuZGxlRGVsZXRlKF9yZWYpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB2YXIgJGluZGV4ID0gX3JlZi4kaW5kZXgsCiAgICAgICAgICByb3cgPSBfcmVmLnJvdzsKCiAgICAgIGlmIChyb3cuaWQgPT0gMSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLAogICAgICAgICAgbWVzc2FnZTogJ+i2hee6p+euoeeQhuWRmOaXoOazleWIoOmZpCEnCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLiRjb25maXJtKCfnoa7lrprliKDpmaTmraTnlKjmiLc/JywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruiupCcsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gZGVsU3lzVXNlcih7CiAgICAgICAgICAgICAgICAgICdpZCc6IHJvdy5pZAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF90aGlzNC51c2Vyc0xpc3Quc3BsaWNlKCRpbmRleCwgMSk7CgogICAgICAgICAgICAgICAgX3RoaXM0LiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfIScKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkpLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIGNvbmZpcm11c2VyOiBmdW5jdGlvbiBjb25maXJtdXNlcigpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgaXNFZGl0LCBjaGVja2VkS2V5cywgX3lpZWxkJHVwZGF0ZVN5c1VzZXIsIGRhdGEsIGluZGV4LCBfeWllbGQkYWRkU3lzVXNlciwgX2RhdGEsIF90aGlzNSR1c2VyLCBpZCwgdXNlcm5hbWUsIG5hbWU7CgogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpc0VkaXQgPSBfdGhpczUuZGlhbG9nVHlwZSA9PT0gJ2VkaXQnOwogICAgICAgICAgICAgICAgY2hlY2tlZEtleXMgPSBfdGhpczUuJHJlZnMudHJlZS5nZXRDaGVja2VkS2V5cygpOwogICAgICAgICAgICAgICAgX3RoaXM1LnVzZXIucm9sZUlkcyA9IGNoZWNrZWRLZXlzLmpvaW4oJywnKTsKCiAgICAgICAgICAgICAgICBpZiAoIWlzRWRpdCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDE5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlU3lzVXNlcihfdGhpczUudXNlcik7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIF95aWVsZCR1cGRhdGVTeXNVc2VyID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgICBkYXRhID0gX3lpZWxkJHVwZGF0ZVN5c1VzZXIuZGF0YTsKICAgICAgICAgICAgICAgIF90aGlzNS51c2VyLnJvbGVzID0gZGF0YS5yb2xlczsKICAgICAgICAgICAgICAgIGluZGV4ID0gMDsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIGlmICghKGluZGV4IDwgX3RoaXM1LnVzZXJzTGlzdC5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghKF90aGlzNS51c2Vyc0xpc3RbaW5kZXhdLmlkID09PSBfdGhpczUucm9sZS5pZCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXM1LnVzZXJzTGlzdC5zcGxpY2UoaW5kZXgsIDEsIE9iamVjdC5hc3NpZ24oe30sIF90aGlzNS5yb2xlKSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoImJyZWFrIiwgMTcpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgaW5kZXgrKzsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjY7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICByZXR1cm4gYWRkU3lzVXNlcihfdGhpczUudXNlcik7CgogICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICBfeWllbGQkYWRkU3lzVXNlciA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgICAgX2RhdGEgPSBfeWllbGQkYWRkU3lzVXNlci5kYXRhOwogICAgICAgICAgICAgICAgX3RoaXM1LnVzZXIuaWQgPSBfZGF0YS5pZDsKICAgICAgICAgICAgICAgIF90aGlzNS51c2VyLnJvbGVzID0gX2RhdGEucm9sZXM7CgogICAgICAgICAgICAgICAgX3RoaXM1LnVzZXJzTGlzdC5wdXNoKF90aGlzNS51c2VyKTsKCiAgICAgICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgICAgIF90aGlzNSR1c2VyID0gX3RoaXM1LnVzZXIsIGlkID0gX3RoaXM1JHVzZXIuaWQsIHVzZXJuYW1lID0gX3RoaXM1JHVzZXIudXNlcm5hbWUsIG5hbWUgPSBfdGhpczUkdXNlci5uYW1lOwogICAgICAgICAgICAgICAgX3RoaXM1LmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICBfdGhpczUuJG5vdGlmeSh7CiAgICAgICAgICAgICAgICAgIHRpdGxlOiAnU3VjY2VzcycsCiAgICAgICAgICAgICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIlxuICAgICAgICAgICAgPGRpdj5cdTc1MjhcdTYyMzdJRDogIi5jb25jYXQoaWQsICI8L2Rpdj5cbiAgICAgICAgICAgIDxkaXY+XHU3NTI4XHU2MjM3XHU1NDBEOiAiKS5jb25jYXQodXNlcm5hbWUsICI8L2Rpdj5cbiAgICAgICAgICAgIDxkaXY+XHU3NzFGXHU1QjlFXHU1OUQzXHU1NDBEOiAiKS5jb25jYXQobmFtZSwgIjwvZGl2PlxuICAgICAgICAgICIpLAogICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI5OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZW1pdElucHV0OiBmdW5jdGlvbiBlbWl0SW5wdXQodmFsKSB7CiAgICAgIGNvbnNvbGUubG9nKCcxLz09PT09PT09Jyk7CiAgICAgIGNvbnNvbGUubG9nKHZhbCk7CiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgdmFsKTsKICAgIH0sCiAgICBoYW5kbGVJbWFnZVN1Y2Nlc3M6IGZ1bmN0aW9uIGhhbmRsZUltYWdlU3VjY2VzcyhmaWxlKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCcyLz09PT09PT09JykKICAgICAgLy8gY29uc29sZS5sb2coZmlsZSkKICAgICAgLy8gdGhpcy5lbWl0SW5wdXQoZmlsZS5maWxlcy5maWxlKQogICAgICB0aGlzLnVwbG9hZFVSTChmaWxlLmZpbGVzLmZpbGUpOwogICAgfSwKICAgIGJlZm9yZVVwbG9hZDogZnVuY3Rpb24gYmVmb3JlVXBsb2FkKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHZhciBfc2VsZiA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGdldFRva2VuKCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIHZhciBrZXkgPSByZXNwb25zZS5kYXRhLnFpbml1X2tleTsKICAgICAgICAgIHZhciB0b2tlbiA9IHJlc3BvbnNlLmRhdGEucWluaXVfdG9rZW47CiAgICAgICAgICBfc2VsZi5fZGF0YS5kYXRhT2JqLnRva2VuID0gdG9rZW47CiAgICAgICAgICBfc2VsZi5fZGF0YS5kYXRhT2JqLmtleSA9IGtleTsKICAgICAgICAgIF90aGlzNi50ZW1wVXJsID0gcmVzcG9uc2UuZGF0YS5xaW5pdV91cmw7CiAgICAgICAgICByZXNvbHZlKHRydWUpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICByZWplY3QoZmFsc2UpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICB1cGxvYWRVUkw6IGZ1bmN0aW9uIHVwbG9hZFVSTChmaWxlKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgdmFyIHRoYXQgPSB0aGlzOyAvL+azqOaEj+WTpu+8jOi/memHjOaMh+WumuaWh+S7tuWkuSdpbWFnZS8n77yM5bCd6K+V6L+H5YaZ5Zyo6YWN572u5paH5Lu277yM5L2G5piv5ZCE56eN5LiN6KGM77yM5YaZ5Zyo6L+Z6YeM5bCx5Y+v5LulCgogICAgICB2YXIgZmlsZU5hbWUgPSAnbWhqeS8nICsgJ2hlYWRlcicgKyBnZXRGaWxlTmFtZVVVSUQoKSArICcuanBnJzsgLy/lrprkuYnllK/kuIDnmoTmlofku7blkI3vvIzmiZPljbDlh7rmnaXnmoR1aWTlhbblrp7lsLHmmK/ml7bpl7TmiLMKCiAgICAgIGNsaWVudCgpLm11bHRpcGFydFVwbG9hZChmaWxlTmFtZSwgZmlsZSwgewogICAgICAgIHByb2dyZXNzOiBmdW5jdGlvbiBwcm9ncmVzcyhwZXJjZW50YWdlLCBjcHQpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCfmiZPljbDov5vluqYnLCBwZXJjZW50YWdlKTsKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIC8v5q2k5aSE6LWL5YC877yM5piv55u45b2T5LqO5LiK5Lyg5oiQ5Yqf5LmL5ZCO77yM5omL5Yqo5ou85o6l5pyN5Yqh5Zmo5Zyw5Z2A5ZKM5paH5Lu25ZCNCiAgICAgICAgX3RoaXM3LnVzZXIuYXZhdGFyID0gJ2h0dHBzOi8vYnpycm1lZGlhLm9zcy1jbi1iZWlqaW5nLmFsaXl1bmNzLmNvbS8nICsgZmlsZU5hbWU7CiAgICAgICAgY29uc29sZS5sb2coJysrKysrKysrKysnKTsKICAgICAgICBjb25zb2xlLmxvZyhfdGhpczcudXNlci5hdmF0YXIpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":"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","names":["id","username","avatar","name","phone","alipay","rolesData","data","user","roles","usersList","dataObj","token","key","dialogVisible","dialogType","checkStrictly","defaultProps","label","title","computed","filters","filterStatus","status","filterRoles","tmpRoles","created","methods","checkPermission","getRoles","res","getSysUsersList","generateRoles","generateArr","handleAddUser","handleEdit","scope","handleDelete","type","message","confirmButtonText","cancelButtonText","then","delSysUser","catch","console","confirmuser","isEdit","checkedKeys","updateSysUser","index","addSysUser","dangerouslyUseHTMLString","emitInput","val","handleImageSuccess","file","beforeUpload","getToken","_self","resolve","reject","uploadURL","client","progress"],"sourceRoot":"src/views/permission","sources":["directive.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-button v-if=\"checkPermission(['admin'])\" type=\"primary\" @click=\"handleAddUser\">新建用户</el-button>\n\n    <el-table :data=\"usersList\" style=\"width: 100%;margin-top:30px;\" border>\n      <el-table-column align=\"center\" label=\"ID\" width=\"50\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.id }}\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" label=\"用户名\" width=\"220\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.username }}\n        </template>\n      </el-table-column>\n      <el-table-column align=\"header-center\" label=\"头像\" width=\"120\">\n        <template slot-scope=\"scope\">\n          <img :src=\"scope.row.avatar\" style=\"width: 80px;height: 80px;\" />\n        </template>\n      </el-table-column>\n\n      <el-table-column align=\"center\" label=\"邀请码\" width=\"220\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.attcode }}\n        </template>\n      </el-table-column>\n\n      <el-table-column align=\"center\" label=\"角色\" width=\"220\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.roles|filterRoles }}\n        </template>\n      </el-table-column>\n\n      <el-table-column align=\"center\" label=\"状态\" width=\"120\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.status|filterStatus }}\n        </template>\n      </el-table-column>\n      <el-table-column align=\"header-center\" label=\"创建时间\" width=\"220\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.created_time }}\n        </template>\n      </el-table-column>\n      <el-table-column align=\"header-center\" label=\"创建人\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.created_by_username }}\n        </template>\n      </el-table-column>\n      <el-table-column align=\"header-center\" label=\"更新时间\" width=\"220\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.updated_time }}\n        </template>\n      </el-table-column>\n      <el-table-column align=\"header-center\" label=\"更新人\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.updated_by_username }}\n        </template>\n      </el-table-column>\n      <el-table-column v-if=\"checkPermission(['admin'])\" align=\"center\" label=\"操作\" width=\"300\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"primary\" size=\"small\" @click=\"handleEdit(scope)\">编辑</el-button>\n          <el-button type=\"danger\" size=\"small\" @click=\"handleDelete(scope)\">删除</el-button>\n          <el-button type=\"danger\" size=\"small\" @click=\"handleResetPWD(scope)\">重置密码</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <el-dialog :visible.sync=\"dialogVisible\" :title=\"dialogType==='edit'?'编辑用户':'新建用户'\">\n      <el-form :model=\"user\" label-width=\"100px\" label-position=\"left\">\n        <el-form-item label=\"用户名\">\n          <el-input v-model=\"user.username\" placeholder=\"用户名\" />\n        </el-form-item>\n        <el-form-item label=\"头像\">\n          <el-upload\n            :data=\"dataObj\"\n            :multiple=\"false\"\n            :show-file-list=\"false\"\n            :on-success=\"handleImageSuccess\"\n            class=\"image-uploader\"\n            action=\"https://httpbin.org/post\"\n          >\n            <img :src=\"user.avatar+'?imageView2/1/w/80/h/80'\" class=\"image-uploader\" >\n            </img>\n          </el-upload>\n        </el-form-item>\n        <el-form-item label=\"真实姓名\">\n          <el-input v-model=\"user.name\" placeholder=\"真实姓名\"/>\n        </el-form-item>\n        <el-form-item label=\"手机号\">\n          <el-input v-model=\"user.phone\" placeholder=\"手机号\"/>\n        </el-form-item>\n        <el-form-item label=\"支付宝账号\">\n          <el-input v-model=\"user.alipay\" placeholder=\"支付宝账号\"/>\n        </el-form-item>\n        <el-form-item label=\"角色\">\n          <el-tree\n            ref=\"tree\"\n            :check-strictly=\"checkStrictly\"\n            :data=\"rolesData\"\n            :props=\"defaultProps\"\n            show-checkbox\n            node-key=\"id\"\n            class=\"permission-tree\"\n          />\n        </el-form-item>\n      </el-form>\n      <div style=\"text-align:right;\">\n        <el-button type=\"danger\" @click=\"dialogVisible=false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"confirmuser\">提交</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport path from 'path'\nimport { deepClone } from '@/utils'\nimport { getRoles} from '@/api/role'\nimport { getSysUsersList, addSysUser, updateSysUser, delSysUser } from '@/api/user'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\nimport checkPermission from '@/utils/permission' // 权限判断函数\n\nconst defaultUser = {\n  id: 0,\n  username: '',\n  avatar: '',\n  name: '',\n  phone: '',\n  alipay: '',\n  rolesData: []\n}\n\nexport default {\n  data() {\n    return {\n      user: Object.assign({}, defaultUser),\n      roles: [],\n      usersList: [],\n      dataObj: { token: '', key: '' },\n      dialogVisible: false,\n      dialogType: 'new',\n      checkStrictly: false,\n      defaultProps: {\n        label: 'title',\n        title: 'title',\n        id: 0\n      }\n    }\n  },\n  computed: {\n    rolesData() {\n      return this.roles\n    }\n  },\n  filters:{\n    filterStatus(status) {\n      if (status == 1) {\n        return \"正常\"\n      } else if (status == 2) {\n        return \"禁用\"\n      }\n    },\n    filterRoles(roles) {\n      let tmpRoles = []\n      for (var i = 0; i < roles.length; i++) {\n        let role = roles[i]\n        tmpRoles.push(role.name)\n      }\n\n      return tmpRoles.join(',')\n    }\n  },\n  created() {\n    // Mock: get all routes and roles list from server\n    this.getRoles()\n    this.getSysUsersList()\n  },\n  methods: {\n    checkPermission,\n    async getRoles() {\n      const res = await getRoles()\n      let roles = res.data\n      this.roles = this.generateRoles(roles)\n    },\n    async getSysUsersList() {\n      const res = await getSysUsersList({token:getToken()})\n      this.usersList = res.data\n    },\n\n    // Reshape the routes structure so that it looks the same as the sidebar\n    generateRoles(roles) {\n      const res = []\n\n      for (let role of roles) {\n        const data = {\n          title: role.name,\n          label: role.name,\n          id: role.id\n        }\n        res.push(data)\n      }\n      return res\n    },\n\n    generateArr(roles) {\n      let data = []\n      roles.forEach(role => {\n        data.push(role)\n      })\n      return data\n    },\n    handleAddUser() {\n      this.user = Object.assign({}, defaultUser)\n      if (this.$refs.tree) {\n        this.$refs.tree.setCheckedNodes([])\n      }\n      this.dialogType = 'new'\n      this.dialogVisible = true\n    },\n    handleEdit(scope) {\n      this.dialogType = 'edit'\n      this.dialogVisible = true\n      this.checkStrictly = true\n      this.user = deepClone(scope.row)\n      this.$nextTick(() => {\n        const roles = this.generateRoles(this.rolesData)\n        this.$refs.tree.setCheckedNodes(this.generateArr(this.user.roles))\n        // set checked state of a node not affects its father and child nodes\n        this.checkStrictly = false\n      })\n    },\n    handleDelete({ $index, row }) {\n      if (row.id == 1) {\n        this.$message({\n          type: 'warning',\n          message: '超级管理员无法删除!'\n        })\n        return\n      }\n      this.$confirm('确定删除此用户?', '提示', {\n        confirmButtonText: '确认',\n        cancelButtonText: '取消',\n        type: 'warning'\n      })\n        .then(async() => {\n          await delSysUser({'id':row.id})\n          this.usersList.splice($index, 1)\n          this.$message({\n            type: 'success',\n            message: '删除成功!'\n          })\n        })\n        .catch(err => { console.error(err) })\n    },\n    async confirmuser() {\n      const isEdit = this.dialogType === 'edit'\n\n      const checkedKeys = this.$refs.tree.getCheckedKeys()\n      this.user.roleIds = checkedKeys.join(',')\n\n      if (isEdit) {\n        const { data } = await updateSysUser(this.user)\n        this.user.roles = data.roles\n        for (let index = 0; index < this.usersList.length; index++) {\n          if (this.usersList[index].id === this.role.id) {\n            this.usersList.splice(index, 1, Object.assign({}, this.role))\n            break\n          }\n        }\n      } else {\n        const { data } = await addSysUser(this.user)\n        this.user.id = data.id\n        this.user.roles = data.roles\n        this.usersList.push(this.user)\n      }\n\n      const { id, username, name } = this.user\n      this.dialogVisible = false\n      this.$notify({\n        title: 'Success',\n        dangerouslyUseHTMLString: true,\n        message: `\n            <div>用户ID: ${id}</div>\n            <div>用户名: ${username}</div>\n            <div>真实姓名: ${name}</div>\n          `,\n        type: 'success'\n      })\n    },\n\n    emitInput(val) {\n      console.log('1/========')\n      console.log(val)\n      this.$emit('input', val)\n    },\n    handleImageSuccess(file) {\n      // console.log('2/========')\n      // console.log(file)\n      // this.emitInput(file.files.file)\n      this.uploadURL(file.files.file)\n    },\n    beforeUpload() {\n      const _self = this\n      return new Promise((resolve, reject) => {\n        getToken().then(response => {\n          const key = response.data.qiniu_key\n          const token = response.data.qiniu_token\n          _self._data.dataObj.token = token\n          _self._data.dataObj.key = key\n          this.tempUrl = response.data.qiniu_url\n          resolve(true)\n        }).catch(err => {\n          console.log(err)\n          reject(false)\n        })\n      })\n    },\n    uploadURL(file) {\n    \tlet that = this\n    \t//注意哦，这里指定文件夹'image/'，尝试过写在配置文件，但是各种不行，写在这里就可以\n    \tvar fileName = 'mhjy/' + 'header' + getFileNameUUID() + '.jpg';\n    \t//定义唯一的文件名，打印出来的uid其实就是时间戳\n    \tclient().multipartUpload(fileName, file, {\n    \t\tprogress: function(percentage, cpt) {\n    \t\t\tconsole.log('打印进度', percentage)\n    \t\t}\n    \t}).then((res) => {\n    \t\t//此处赋值，是相当于上传成功之后，手动拼接服务器地址和文件名\n    \t\tthis.user.avatar = 'https://bzrrmedia.oss-cn-beijing.aliyuncs.com/' + fileName;\n        console.log('++++++++++')\n        console.log(this.user.avatar)\n    \t})\n    },\n\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.app-container {\n  .roles-table {\n    margin-top: 30px;\n  }\n  .permission-tree {\n    margin-bottom: 30px;\n  }\n  .image-uploader {\n    background-color: #5cd7f7;\n    width: 80px;\n    height: 80px;\n    border-radius: 40px;\n    color: #000000;\n  }\n}\n</style>\n"]}]}